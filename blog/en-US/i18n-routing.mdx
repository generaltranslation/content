---
title: "How to Set Up i18n Routing in Next.js"
summary: "Learn how to add locale-based URL routing to your Next.js app — from basic setup to localized paths and language detection"
date: 2026-02-17
authors: [default]
tags: ['guide', 'routing', 'internationalization', 'nextjs', 'i18n', 'middleware']
images: ['/static/blogs/i18n-routing.png']
layout: PostLayout
---

## What is i18n routing?

In a multilingual Next.js app, every page needs to exist in multiple languages. i18n routing means putting the language in the URL — `/en/about`, `/fr/about`, `/es/about` — so that each language version has its own shareable, indexable address.

Locale-based routing means each language version of a page has its own URL — `/en/about`, `/fr/about`, `/es/about`. This gives search engines separate pages to index per language, lets users share links that land on the right language, and makes your app feel native to international visitors.

In Next.js, this is done with a `[locale]` dynamic segment and middleware that handles detection and redirects.

---

## Setting up the `[locale]` segment

The standard Next.js pattern is to nest all your pages under a `[locale]` dynamic segment:

```
app/
└── [locale]/
    ├── layout.tsx
    ├── page.tsx
    └── about/
        └── page.tsx
```

Then middleware intercepts every request, determines the locale, and routes accordingly. In Next.js 16+, this file is `proxy.ts`. In Next.js 15 and below, it's `middleware.ts`.

Here's a minimal implementation:

```ts title="proxy.ts"
import { NextRequest, NextResponse } from 'next/server';

const locales = ['en', 'es', 'fr'];
const defaultLocale = 'en';

export default function middleware(req: NextRequest) {
  const { pathname } = req.nextUrl;

  // Check if the pathname already has a locale
  const pathnameLocale = locales.find(
    (locale) => pathname.startsWith(`/${locale}/`) || pathname === `/${locale}`
  );

  if (pathnameLocale) return NextResponse.next();

  // Detect locale from Accept-Language header
  const acceptLanguage = req.headers.get('accept-language');
  const preferred = acceptLanguage?.split(',')[0]?.split('-')[0] || defaultLocale;
  const locale = locales.includes(preferred) ? preferred : defaultLocale;

  return NextResponse.redirect(new URL(`/${locale}${pathname}`, req.url));
}
```

This works for basic cases, but it's missing a lot:

- **Cookie persistence** — users who switch language lose their preference on reload
- **Locale standardization** — is `zh-Hant-TW` the same as `zh-TW`?
- **Default locale handling** — should `/en/about` redirect to `/about`?
- **Localized paths** — `/fr/about` vs `/fr/a-propos`

These edge cases accumulate fast. In practice, most teams are better off using a dedicated i18n routing library rather than maintaining hand-written middleware.

---

## Using a library for i18n routing

There are several Next.js i18n libraries available. With ours, [gt-next](https://generaltranslation.com/docs/next/tutorials/quickstart), the entire middleware setup is three lines:

```ts title="proxy.ts"
import { createNextMiddleware } from 'gt-next/middleware';

export default createNextMiddleware();

export const config = {
  matcher: ['/((?!api|static|.*\\..*|_next).*)'],
};
```

The middleware automatically detects the user's locale from the URL, cookies, and `Accept-Language` header, then routes to the correct `[locale]` path.

Even for a simple two-language app, using a library saves time — and it makes adding new languages trivial later.

---

## How locale detection works

A good i18n middleware determines the user's language from multiple sources, with a clear priority order. gt-next's `createNextMiddleware` checks:

1. **URL pathname** — if the path starts with `/es/about`, that locale is used
2. **Locale cookie** — if the user previously selected a language via a language switcher
3. **`Accept-Language` header** — the browser sends preferred languages with every request
4. **Default locale** — the fallback in your `gt.config.json`

The first match wins. URLs always take priority. The browser header is only used for first-time visitors with no cookie and no locale in the URL.

### Handling the default locale prefix

By default, gt-next omits the prefix for the default locale:

```
/about     → English (default)
/es/about  → Spanish
/fr/about  → French
```

Under the hood, `/about` is rewritten to `/en/about` so Next.js can resolve the `[locale]` segment, but the user never sees the prefix.

To require a prefix for all locales (useful for some SEO strategies):

```ts title="proxy.ts"
export default createNextMiddleware({
  prefixDefaultLocale: true,
});
```

Now `/about` redirects to `/en/about`.

---

## Localized URL paths

For many languages, keeping English words in URLs isn't ideal. French users might expect `/fr/a-propos` instead of `/fr/about`, and Chinese users might expect `/zh/关于`.

gt-next handles this with `pathConfig`:

```ts title="proxy.ts"
export default createNextMiddleware({
  pathConfig: {
    "/about": {
      "fr": "/a-propos",
      "zh": "/关于",
    },
    "/products": {
      "fr": "/produits",
      "zh": "/产品",
    },
    "/product/[id]": {
      "fr": "/produit/[id]",
      "zh": "/产品/[id]",
    },
  },
});
```

The keys are the **shared paths** matching your `app/[locale]/` directory. The values are the localized paths users see in the browser. The middleware maps between them automatically:

- `/fr/a-propos` resolves to `app/[locale]/about/page.tsx`
- Dynamic segments work too — `/fr/produit/123` maps to `app/[locale]/product/[id]/page.tsx`
- English paths with no localized version use the shared path: `/en/about`

Your file structure stays clean regardless of how many languages you support.

### Why this matters for SEO

Search engines treat URLs as content signals. `/fr/a-propos` tells Google this is a French page about "about us" — `/fr/about` sends mixed signals with an English word in a French URL.

Localized paths also improve click-through rates. Users are more likely to click a search result with a URL in their own language.

---

## Complete example

Here's a full setup combining locale detection, default locale handling, and localized paths:

```ts title="proxy.ts"
import { createNextMiddleware } from 'gt-next/middleware';

export default createNextMiddleware({
  prefixDefaultLocale: false,
  pathConfig: {
    "/about": {
      "fr": "/a-propos",
      "es": "/acerca-de",
    },
    "/blog": {
      "fr": "/blogue",
    },
    "/contact": {
      "fr": "/nous-contacter",
      "es": "/contacto",
    },
  },
});

export const config = {
  matcher: ['/((?!api|static|.*\\..*|_next).*)'],
};
```

With this setup:

- First-time visitors are routed based on their browser language
- Returning visitors keep their preference via cookies
- The default locale gets clean, unprefixed URLs
- French and Spanish users see localized paths
- Dynamic routes work automatically
- Locale variants like `zh-Hant-TW` resolve correctly

---

## Next steps

- [gt-next quickstart](https://generaltranslation.com/docs/next/tutorials/quickstart) — set up the full i18n stack
- [Middleware guide](/docs/next/guides/middleware) — detailed middleware documentation
- [`createNextMiddleware` API reference](/docs/next/api/middleware/create-next-middleware) — all configuration options
- [Localized paths guide](/docs/next/guides/middleware#localized-paths) — advanced path configuration
