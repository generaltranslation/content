---
title: "How to Set Up i18n Routing in Next.js (The Right Way)"
summary: "Learn how to add locale-based URL routing to your Next.js app — from basic setup to localized paths and language detection."
date: 2026-02-17
authors: [archie]
tags: ['guide', 'routing', 'internationalization', 'nextjs', 'i18n', 'middleware']
images: ['/static/blogs/i18n-routing.png']
layout: PostLayout
---

## Why i18n routing matters

I often encounter multilingual apps where the language is stored in a cookie or query parameter:

```
myapp.com/about?lang=fr
```

This is a telltale sign of a developer who hasn't thought carefully about internationalization.

Next.js apps that support multiple languages need proper i18n routing — for SEO, for shareable links, and for user experience.
**And it's not that hard to get routing right, especially with the right middleware.**
But there are plenty of bad practices new developers fall into, especially when building for more than two or three languages.

### Hard-coded locale logic

Many projects — including surprisingly large and important ones — hard-code locale detection and routing.

```tsx
// Don't do this
export default function middleware(req: NextRequest) {
  const locale = req.cookies.get('locale')?.value || 'en';
  const url = req.nextUrl.clone();
  url.pathname = `/${locale}${url.pathname}`;
  return NextResponse.rewrite(url);
}
```

This approach breaks in all sorts of ways:
the locale is invisible to search engines, users can't share localized links,
and there's no detection of the browser's preferred language.

The table below illustrates some common problems:

| Problem              | What happens                                                          | Impact                                                                |
| -------------------- | --------------------------------------------------------------------- | --------------------------------------------------------------------- |
| No locale in URL     | `/about` looks the same for English and French users                  | Search engines can't index different language versions separately.      |
| Cookie-only locale   | User shares a link, recipient sees a different language                | Broken sharing experience.                                            |
| No language detection | First-time visitors always see English, even if their browser is set to French | Poor first impression for international users.                        |

A few extra lines of manual code quickly becomes unmaintainable.

And it gets worse when you need localized URL paths.
What works for `/en/about` and `/fr/about` falls apart when French users expect `/fr/a-propos`
and Chinese users expect `/zh/关于`.
**Companies we work with often put off i18n routing
because of the pain of handling all these edge cases manually.**

---

## Basic i18n routing in Next.js

In Next.js, the standard approach to i18n routing is to use a `[locale]` dynamic segment combined with middleware.

First, restructure your `app/` directory to nest pages under `[locale]`:

```
app/
└── [locale]/
    ├── layout.tsx
    ├── page.tsx
    └── about/
        └── page.tsx
```

Then, create a middleware file in your project root. In Next.js 16+, this is `proxy.ts`. In Next.js 15 and below, it's `middleware.ts`.

A naive implementation might look like this:

```ts title="proxy.ts"
import { NextRequest, NextResponse } from 'next/server';

const locales = ['en', 'es', 'fr'];
const defaultLocale = 'en';

export default function middleware(req: NextRequest) {
  const { pathname } = req.nextUrl;

  // Check if the pathname already has a locale
  const pathnameLocale = locales.find(
    (locale) => pathname.startsWith(`/${locale}/`) || pathname === `/${locale}`
  );

  if (pathnameLocale) return NextResponse.next();

  // Detect locale from Accept-Language header
  const acceptLanguage = req.headers.get('accept-language');
  const preferred = acceptLanguage?.split(',')[0]?.split('-')[0] || defaultLocale;
  const locale = locales.includes(preferred) ? preferred : defaultLocale;

  return NextResponse.redirect(new URL(`/${locale}${pathname}`, req.url));
}
```

This works for simple cases. But it's missing:
- Cookie persistence (users who switch language lose their preference on reload)
- Proper locale standardization (is `zh-Hant-TW` the same as `zh-TW`?)
- Handling of the default locale prefix (should `/en/about` redirect to `/about`?)
- Localized URL paths (`/fr/about` vs `/fr/a-propos`)

At this stage, you should think seriously about a dedicated i18n routing library.

Although developers often think middleware is simple enough to write by hand,
the edge cases accumulate fast — and a well-tested library handles all of them.

There are several Next.js i18n libraries, including ours, [gt-next](https://generaltranslation.com/docs/next/tutorials/quickstart).
Setting up i18n routing with gt-next is three lines:

```ts title="proxy.ts"
import { createNextMiddleware } from 'gt-next/middleware';

export default createNextMiddleware();

export const config = {
  matcher: ['/((?!api|static|.*\\..*|_next).*)'],
};
```

The middleware automatically detects the user's locale from the URL, cookies, and browser `Accept-Language` header, then routes them to the correct `[locale]` path.

Using a library here is best practice even for simple two-language apps, and makes adding more languages trivial later.

---

## How locale detection works

A good i18n middleware needs to determine the user's preferred language from multiple sources, with a clear priority order.

gt-next's `createNextMiddleware` checks the following sources, in order:

1. **URL pathname** — if the path starts with a locale prefix like `/es/about`, that locale is used
2. **Locale cookie** — if the user previously selected a language (e.g., via a language switcher), that preference is stored in a cookie
3. **Browser `Accept-Language` header** — the browser sends the user's preferred languages with every request
4. **Default locale** — the fallback configured in your `gt.config.json`

The first match wins. This means a URL with a locale always takes priority,
and the browser header is only used for first-time visitors with no cookie and no locale in the URL.

### Handling the default locale prefix

By default, gt-next does **not** add a prefix for the default locale:

```
/about     → English (default, no prefix)
/es/about  → Spanish
/fr/about  → French
```

This keeps your default-language URLs clean. Under the hood, the middleware rewrites `/about` to `/en/about` internally so Next.js can resolve the `[locale]` segment, but the user never sees the prefix.

If you prefer every locale to have a prefix (useful for some SEO strategies), enable it:

```ts title="proxy.ts"
export default createNextMiddleware({
  prefixDefaultLocale: true,
});
```

Now all URLs are prefixed:

```
/en/about  → English
/es/about  → Spanish
/fr/about  → French
```

A user visiting `/about` will be redirected to `/en/about`.

---

## Localized URL paths

Sometimes `/en/about` and `/fr/about` aren't enough.
French users might expect `/fr/a-propos`, and Chinese users might expect `/zh/关于`.

This is where most hand-written middleware solutions fall apart.
gt-next supports localized paths through the `pathConfig` option:

```ts title="proxy.ts"
export default createNextMiddleware({
  pathConfig: {
    "/about": {
      "fr": "/a-propos",
      "zh": "/关于",
    },
    "/products": {
      "fr": "/produits",
      "zh": "/产品",
    },
    "/product/[id]": {
      "fr": "/produit/[id]",
      "zh": "/产品/[id]",
    },
  },
});
```

The keys in `pathConfig` are the **shared paths** — the path structure used in your `app/[locale]/` directory.
The values are the localized paths that users see in their browser.

The middleware handles the mapping automatically:

- A French user visiting `/fr/a-propos` sees the localized URL, but Next.js internally resolves it to `app/[locale]/about/page.tsx`
- Dynamic segments like `[id]` work too — `/fr/produit/123` maps to `app/[locale]/product/[id]/page.tsx`
- English paths with no localized version just use the shared path: `/en/about`

This means your file structure stays clean and consistent regardless of how many languages you support.

### Why localized paths matter for SEO

Search engines treat URLs as part of the content signal.
A URL like `/fr/a-propos` is a much stronger signal to Google
that this page is French content about "about us"
than `/fr/about` — which still contains an English word.

Localized paths also improve click-through rates in search results.
French users are more likely to click a result with `/fr/a-propos` in the URL than `/fr/about`.

---

## Putting it all together

Here's a complete example combining all the features — locale detection, default locale handling, and localized paths:

```ts title="proxy.ts"
import { createNextMiddleware } from 'gt-next/middleware';

export default createNextMiddleware({
  prefixDefaultLocale: false, // clean URLs for the default locale
  pathConfig: {
    "/about": {
      "fr": "/a-propos",
      "es": "/acerca-de",
    },
    "/blog": {
      "fr": "/blogue",
    },
    "/contact": {
      "fr": "/nous-contacter",
      "es": "/contacto",
    },
  },
});

export const config = {
  matcher: ['/((?!api|static|.*\\..*|_next).*)'],
};
```

With this setup:

- First-time visitors are routed based on their browser language
- Returning visitors keep their language preference via cookies
- The default locale gets clean URLs without a prefix
- French and Spanish users see localized paths
- Dynamic routes work automatically
- Your `app/` directory uses a single shared structure

The middleware handles locale standardization under the hood
(so `zh-Hant-TW` and `zh-TW` resolve correctly),
and validates all configured locales on startup.

---

## Next steps

Ready to add i18n routing to your Next.js app? Check out these resources:

- [gt-next quickstart](https://generaltranslation.com/docs/next/tutorials/quickstart) to set up the full i18n stack
- [Middleware guide](/docs/next/guides/middleware) for detailed documentation
- [`createNextMiddleware` API reference](/docs/next/api/middleware/create-next-middleware) for all configuration options
- [Localized paths guide](/docs/next/guides/middleware#localized-paths) for advanced path configuration
